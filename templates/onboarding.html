<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Complete your profile</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='auth.css') }}">
</head>
<body>
    <div class="auth-container">
        <div class="auth-card">
            <h2>Complete your profile</h2>
            <p class="subtitle">Tell others a little about yourself before joining chats.</p>

            {% with messages = get_flashed_messages(with_categories=true) %}
              {% if messages %}
                {% for category, msg in messages %}
                  <div class="alert {{ category }}">{{ msg }}</div>
                {% endfor %}
              {% endif %}
            {% endwith %}

            <form method="POST" enctype="multipart/form-data">
                <input type="text" name="display_name" placeholder="Display name" value="{{ current_user.display_name or '' }}" required maxlength="80">
                <img class="profile-photo-large" src="{{ profile_avatar }}" alt="Current profile photo">
                <input type="file" name="profile_image" accept=".jpg,.jpeg,.png,.gif,.webp">
                <textarea name="bio" placeholder="Short bio (optional)" maxlength="500" rows="4">{{ current_user.bio or '' }}</textarea>
                <button type="submit">Save profile</button>
            </form>

            <p class="switch">
                Need to leave?
                <a href="{{ url_for('logout') }}">Logout</a>
            </p>
        </div>
    </div>
</body>
</html>